{"version":3,"file":"index.js","sources":["../src/store/InitialState.js","../src/store/utils.js","../src/store/_animations.js","../src/store/_zoom.js","../src/store/_pinch.js","../src/store/_pan.js","../src/store/_velocity.js","../src/store/makePassiveEventOption.js","../src/store/StateContext.js","../src/components/TransformWrapper.js","../node_modules/style-inject/dist/style-inject.es.js","../src/components/TransformComponent.js"],"sourcesContent":["export const initialState = {\n  // components\n  wrapperComponent: null,\n  contentComponent: null,\n  // settings\n  limitToBounds: true,\n  disabled: false,\n  // position\n  isCentered: true,\n  transformEnabled: true,\n  positionX: 0,\n  positionY: 0,\n  maxPositionX: null,\n  minPositionX: null,\n  maxPositionY: null,\n  minPositionY: null,\n  // scale\n  zoomingEnabled: true,\n  scale: 1,\n  maxScale: 8,\n  minScale: 1,\n  previousScale: 1,\n  scaleAnimationPadding: 0.15,\n  // wheel\n  wheelStep: 4,\n  enableWheel: true,\n  enableTouchPadPinch: true,\n  // pinch\n  pinchEnabled: true,\n  pinchSensitivity: 1,\n  startPinchDistance: null,\n  //panning\n  panningEnabled: true,\n  limitToWrapperBounds: false,\n  startPanningCoords: null,\n  lockAxisX: false,\n  lockAxisY: false,\n  // velocity\n  velocityTimeBasedOnMove: true,\n  minVelocity: 1.8,\n  enableVelocity: true,\n  minVelocityScale: 1,\n  // animations\n  velocityAnimationSpeed: 1800,\n  zoomAnimationSpeed: 200,\n  velocitySensitivity: 1,\n  // controls\n  dbClickEnabled: true,\n  dbClickMode: \"zoomIn\",\n  zoomInStep: 40,\n  zoomOutStep: 40,\n  dbClickStep: 40,\n  zoomInAnimationSpeed: 200,\n  zoomOutAnimationSpeed: 200,\n  dbClickAnimationSpeed: 200,\n  resetAnimationSpeed: 200,\n  scalePaddingAnimationSpeed: 200,\n};\n","/**\n * Rounds number to given decimal\n * eg. roundNumber(2.34343, 1) => 2.3\n */\nexport const roundNumber = (num, decimal = 5) => {\n  return Number(num.toFixed(decimal));\n};\n\n/**\n * Checks if value is number, if not it returns default value\n * 1# eg. checkIsNumber(2, 30) => 2\n * 2# eg. checkIsNumber(null, 30) => 30\n */\nexport const checkIsNumber = (num, defaultValue) => {\n  return typeof num === \"number\" ? num : defaultValue;\n};\n\n/**\n * Keeps value between given bounds, used for limiting view to given boundaries\n * 1# eg. boundLimiter(2, 0, 3, true) => 2\n * 2# eg. boundLimiter(4, 0, 3, true) => 3\n * 3# eg. boundLimiter(-2, 0, 3, true) => 0\n * 4# eg. boundLimiter(10, 0, 3, false) => 10\n */\nexport const boundLimiter = (value, minBound, maxBound, isActive) => {\n  if (!isActive) return roundNumber(value, 2);\n  if (value < minBound) return roundNumber(minBound, 2);\n  if (value > maxBound) return roundNumber(maxBound, 2);\n  return roundNumber(value, 2);\n};\n\n/**\n * Returns relative coords of mouse on wrapper element, and provides\n * info about it's width, height, with same info about its content(zoomed component) element\n */\nexport const relativeCoords = (event, wrapperComponent, contentComponent, panningCase) => {\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const contentRect = contentComponent.getBoundingClientRect();\n  const contentWidth = contentRect.width;\n  const contentHeight = contentRect.height;\n  const contentLeft = contentRect.left;\n  const contentRight = contentRect.right;\n  const diffHeight = wrapperHeight - contentHeight;\n  const diffWidth = wrapperWidth - contentWidth;\n\n  // mouse position x, y over wrapper component\n  let x = panningCase ? event.clientX : event.clientX - contentRect.left;\n  let y = panningCase ? event.clientY : event.clientY - contentRect.top;\n\n  // Mobile touch event case\n  if (isNaN(x) && event.touches && event.touches[0]) {\n    x = event.touches[0].clientX;\n    y = event.touches[0].clientY;\n  }\n\n  return {\n    x,\n    y,\n    wrapperWidth,\n    wrapperHeight,\n    contentWidth,\n    contentHeight,\n    diffHeight,\n    diffWidth,\n    contentLeft,\n    contentRight,\n  };\n};\n\n/**\n * Calculate bounding area of zoomed/panned element\n */\nexport const calculateBoundingArea = (\n  wrapperWidth,\n  contentWidth,\n  diffWidth,\n  wrapperHeight,\n  contentHeight,\n  diffHeight,\n  limitToWrapperBounds\n) => {\n  const scaleWidthFactor =\n    wrapperWidth > contentWidth ? diffWidth * (limitToWrapperBounds ? 1 : 0.5) : 0;\n  const scaleHeightFactor =\n    wrapperHeight > contentHeight ? diffHeight * (limitToWrapperBounds ? 1 : 0.5) : 0;\n\n  const minPositionX = wrapperWidth - contentWidth - scaleWidthFactor;\n  const maxPositionX = 0 + scaleWidthFactor;\n  const minPositionY = wrapperHeight - contentHeight - scaleHeightFactor;\n  const maxPositionY = 0 + scaleHeightFactor;\n\n  return { minPositionX, maxPositionX, minPositionY, maxPositionY };\n};\n\n/**\n * Returns middle coordinates x,y of two points\n * Used to get middle point of two fingers pinch\n */\n\nexport const getMiddleCoords = (firstPoint, secondPoint, contentComponent, scale) => {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  return {\n    x: ((firstPoint.clientX + secondPoint.clientX) / 2 - contentRect.left) / scale,\n    y: ((firstPoint.clientY + secondPoint.clientY) / 2 - contentRect.top) / scale,\n  };\n};\n\n/**\n * Returns middle position of PageX for touch events\n */\nexport const getMidPagePosition = (firstPoint, secondPoint) => {\n  if (!firstPoint || !secondPoint) return console.warn(\"There are no points provided\");\n  return {\n    x: (firstPoint.clientX + secondPoint.clientX) / 2,\n    y: (firstPoint.clientY + secondPoint.clientY) / 2,\n  };\n};\n\n/**\n * Returns distance between two points x,y\n */\nexport const getDistance = (firstPoint, secondPoint) => {\n  return Math.sqrt(\n    Math.pow(firstPoint.pageX - secondPoint.pageX, 2) +\n      Math.pow(firstPoint.pageY - secondPoint.pageY, 2)\n  );\n};\n\n/**\n * Delete undefined values from object keys\n * Used for deleting empty props\n */\n\nexport const deleteUndefinedProps = value => {\n  let newObject = { ...value };\n  Object.keys(newObject).forEach(key => newObject[key] == undefined && delete newObject[key]);\n  return newObject;\n};\n\n/**\n * Returns center zoom position, for computations, based on the relative center to content node\n */\n\nexport const getRelativeZoomCoords = ({\n  wrapperComponent,\n  contentComponent,\n  scale,\n  positionX,\n  positionY,\n}) => {\n  const { wrapperWidth, wrapperHeight } = relativeCoords(\n    event,\n    wrapperComponent,\n    contentComponent,\n    true\n  );\n  const x = (Math.abs(positionX) + wrapperWidth / 2) / scale;\n  const y = (Math.abs(positionY) + wrapperHeight / 2) / scale;\n  return { x, y };\n};\n\n/**\n * Fire callback if it's function\n */\n\nexport const handleCallback = (callback, props) => {\n  if (callback && typeof callback === \"function\") {\n    callback(props);\n  }\n};\n","/**\n * Functions should return denominator of the target value, which is the next animation step.\n * animationProgress is a value from 0 to 1, reflecting the percentage of animation status.\n */\nfunction easeOut(animationProgress) {\n  return -Math.cos(animationProgress * Math.PI) / 2 + 0.5;\n}\nfunction easeIn(animationProgress) {\n  return -Math.sin(animationProgress * Math.PI) / 2 + 0.5;\n}\nfunction linear(animationProgress) {\n  return animationProgress;\n}\n\nexport function handleDisableAnimation() {\n  this.velocity = null;\n  this.animate = false;\n  this.setState({ startAnimation: false });\n}\n\nexport function animateFunction({\n  animationVariable,\n  animationTime,\n  callback,\n  cancelCallback,\n  doneCallback,\n  animationName = \"easeOut\",\n}) {\n  const lastStep = 1;\n  if (this.animate) {\n    cancelAnimationFrame(this.animate);\n    cancelCallback();\n  }\n  const startTime = new Date().getTime();\n\n  // if animation has only one step\n  if (animationTime === 1) {\n    callback(lastStep);\n    doneCallback();\n    this.animate = null;\n    return;\n  }\n  this.animate = () => {\n    if (!this.animate) return;\n\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / animationTime;\n    const animationType = {\n      easeOut,\n      easeIn,\n      linear,\n    }[animationName];\n    const step = animationType(animationProgress);\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      doneCallback();\n      this.animate = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(this.animate);\n    }\n  };\n  requestAnimationFrame(this.animate);\n}\n\nexport function animatePaddingFunction({\n  animationTime,\n  callback,\n  cancelCallback,\n  doneCallback,\n  animationName = \"easeOut\",\n}) {\n  const lastStep = 1;\n  if (this.zoomPaddingAnimation) {\n    cancelAnimationFrame(this.zoomPaddingAnimation);\n    cancelCallback();\n  }\n  const startTime = new Date().getTime();\n\n  // if animation has only one step\n  if (animationTime === 1) {\n    callback(lastStep);\n    doneCallback();\n    this.zoomPaddingAnimation = null;\n    return;\n  }\n  this.zoomPaddingAnimation = () => {\n    if (!this.zoomPaddingAnimation) return;\n\n    const frameTime = new Date().getTime() - startTime;\n    const animationProgress = frameTime / animationTime;\n    const animationType = {\n      easeOut,\n      easeIn,\n      linear,\n    }[animationName];\n    const step = animationType(animationProgress);\n    if (frameTime >= animationTime) {\n      callback(lastStep);\n      doneCallback();\n      this.zoomPaddingAnimation = null;\n    } else {\n      callback(step);\n      requestAnimationFrame(this.zoomPaddingAnimation);\n    }\n  };\n  requestAnimationFrame(this.zoomPaddingAnimation);\n}\n","import {\n  roundNumber,\n  boundLimiter,\n  calculateBoundingArea,\n  checkIsNumber,\n  handleCallback,\n} from \"./utils\";\nimport { initialState } from \"./InitialState\";\nimport { animateFunction, animatePaddingFunction } from \"./_animations\";\n\nexport function checkZoomBounds(zoom, minScale, maxScale, scaleAnimationPadding) {\n  const maxScaleWithPadding = maxScale + scaleAnimationPadding;\n  const minScaleWithPadding = minScale - scaleAnimationPadding;\n\n  if (!isNaN(maxScale) && zoom >= maxScaleWithPadding) return maxScaleWithPadding;\n  if (!isNaN(minScale) && zoom <= minScaleWithPadding) return minScaleWithPadding;\n  return zoom;\n}\n\nexport function checkPositionBounds(positionX, positionY, bounds, limitToBounds) {\n  const { minPositionX, minPositionY, maxPositionX, maxPositionY } = bounds;\n  const x = boundLimiter(positionX, minPositionX, maxPositionX, limitToBounds);\n  const y = boundLimiter(positionY, minPositionY, maxPositionY, limitToBounds);\n  return { x, y };\n}\n\nexport function getDelta(event, customDelta) {\n  const deltaY = event ? (event.deltaY < 0 ? 1 : -1) : 0;\n  const delta = checkIsNumber(customDelta, deltaY);\n  return delta;\n}\n\nexport function wheelMousePosition(event, contentComponent, scale) {\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  // mouse position x, y over wrapper component\n  const mouseX = (event.clientX - contentRect.left) / scale;\n  const mouseY = (event.clientY - contentRect.top) / scale;\n\n  if (isNaN(mouseX) || isNaN(mouseY)) return console.warn(\"No mouse or touch offset found\");\n\n  return {\n    mouseX,\n    mouseY,\n  };\n}\n\nexport function getComponentsSizes(wrapperComponent, newScale) {\n  const wrapperRect = wrapperComponent.getBoundingClientRect();\n\n  const wrapperWidth = wrapperRect.width;\n  const wrapperHeight = wrapperRect.height;\n\n  const newContentWidth = wrapperWidth * newScale;\n  const newContentHeight = wrapperHeight * newScale;\n  const newDiffWidth = wrapperWidth - newContentWidth;\n  const newDiffHeight = wrapperHeight - newContentHeight;\n\n  return {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  };\n}\n\nexport function calculateZoom(zoomStep, delta, customScale, disabledPadding) {\n  const { scale, maxScale, minScale, scaleAnimationPadding } = this.stateProvider;\n  const padding = disabledPadding ? 0 : scaleAnimationPadding;\n  if (typeof customScale === \"number\" && customScale === scale) return scale;\n  if (typeof customScale === \"number\")\n    return checkZoomBounds(customScale, minScale, maxScale, padding);\n\n  const newScale = scale + zoomStep * delta * (scale / 100);\n\n  const calculatedScale = checkZoomBounds(roundNumber(newScale, 2), minScale, maxScale, padding);\n  if (scale === calculatedScale) return scale;\n\n  return calculatedScale;\n}\n\nexport function calculateTransformation(mouseX, mouseY, scaleDifference, bounds) {\n  if (typeof mouseX !== \"number\" || typeof mouseY !== \"number\")\n    return console.error(\"Mouse X and Y position were not provided!\");\n  const { positionX, positionY, limitToBounds, transformEnabled } = this.stateProvider;\n\n  if (!transformEnabled) return { newPositionX: positionX, newPositionY: positionY };\n\n  const calculatedPositionX = positionX - mouseX * scaleDifference;\n  const calculatedPositionY = positionY - mouseY * scaleDifference;\n\n  const { x, y } = checkPositionBounds(\n    calculatedPositionX,\n    calculatedPositionY,\n    bounds,\n    limitToBounds\n  );\n\n  return { newPositionX: x, newPositionY: y };\n}\n\nexport function handleZoom(\n  event,\n  customMousePosition,\n  customDelta,\n  customStep,\n  animationTime,\n  disabledPadding\n) {\n  const {\n    isDown,\n    zoomingEnabled,\n    disabled,\n    scale,\n    limitToWrapperBounds,\n    wheelStep,\n    positionY,\n    positionX,\n  } = this.stateProvider;\n  const { wrapperComponent, contentComponent } = this.state;\n\n  if (isDown || !zoomingEnabled || disabled) return;\n  if (disabledPadding && this.zoomPaddingTimer) {\n    clearTimeout(this.zoomPaddingTimer);\n    this.zoomPaddingTimer = null;\n  }\n  event.preventDefault();\n  event.stopPropagation();\n  // Scale transformation\n  const delta = getDelta(event, customDelta);\n  const targetScale = calculateZoom.bind(\n    this,\n    customStep || wheelStep,\n    delta,\n    null,\n    disabledPadding\n  )();\n\n  if (targetScale === scale) return;\n\n  // Get new element sizes to calculate bounds\n  const {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  } = getComponentsSizes(wrapperComponent, targetScale);\n\n  // Position transformation\n  const { mouseX, mouseY } =\n    customMousePosition || wheelMousePosition(event, contentComponent, scale);\n\n  const scaleDifference = targetScale - scale;\n\n  const bounds = calculateBoundingArea(\n    wrapperWidth,\n    newContentWidth,\n    newDiffWidth,\n    wrapperHeight,\n    newContentHeight,\n    newDiffHeight,\n    limitToWrapperBounds\n  );\n\n  // Save last zoom bounds, to speed up panning function\n  this.bounds = bounds;\n  this.lastDelta = delta;\n\n  // Calculate transformations\n  const { newPositionX, newPositionY } = calculateTransformation.bind(\n    this,\n    mouseX,\n    mouseY,\n    scaleDifference,\n    bounds\n  )();\n  const speed = checkIsNumber(animationTime, 1);\n  if (!animationTime || Math.abs(scaleDifference) < 0.05) {\n    this.stateProvider = {\n      ...this.stateProvider,\n      positionX: newPositionX,\n      positionY: newPositionY,\n      scale: targetScale,\n      previousScale: scale,\n    };\n    // update component transformation\n    this.setContentComponentTransformation();\n  } else {\n    // animate\n    const params = {\n      animationVariable: disabledPadding ? this.zoomPaddingAnimation : this.animate,\n      animationTime: speed,\n      animationName: \"linear\",\n      callback: step => {\n        const newPosX = positionX + (newPositionX - positionX) * step;\n        const newPosY = positionY + (newPositionY - positionY) * step;\n        const newScale = scale + (targetScale - scale) * step;\n        this.stateProvider = {\n          ...this.stateProvider,\n          positionX: newPosX,\n          positionY: newPosY,\n          scale: newScale,\n          previousScale: scale,\n        };\n        // update component transformation\n        this.setContentComponentTransformation();\n      },\n      doneCallback: () => {\n        if (animationTime !== \"wheel\") {\n          handleCallback(this.props.onZoomChange, this.getCallbackProps());\n        }\n      },\n      cancelCallback: () => {\n        if (animationTime !== \"wheel\") {\n          handleCallback(this.props.onZoomChange, this.getCallbackProps());\n        }\n      },\n    };\n    if (disabledPadding) {\n      animatePaddingFunction.bind(this, params)();\n    } else {\n      animateFunction.bind(this, params)();\n    }\n  }\n}\n\nexport function handleZoomControls(event, customDelta, customStep) {\n  const {\n    positionX,\n    positionY,\n    scale,\n    zoomInAnimationSpeed,\n    zoomOutAnimationSpeed,\n  } = this.stateProvider;\n  const { wrapperComponent } = this.state;\n\n  // calculate zoom center\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const mouseX = (Math.abs(positionX) + wrapperWidth / 2) / scale;\n  const mouseY = (Math.abs(positionY) + wrapperHeight / 2) / scale;\n  const animationSpeed = customDelta ? zoomInAnimationSpeed : zoomOutAnimationSpeed;\n  handleZoom.bind(this, event, { mouseX, mouseY }, customDelta, customStep, animationSpeed)();\n}\n\nexport function handleZoomDbClick(event) {\n  const { dbClickMode, dbClickStep, dbClickAnimationSpeed } = this.stateProvider;\n\n  if (dbClickMode === \"reset\") {\n    return resetTransformations.bind(this, event, dbClickAnimationSpeed)();\n  }\n  const delta = dbClickMode === \"zoomOut\" ? -1 : 1;\n  handleZoom.bind(this, event, null, delta, dbClickStep, dbClickAnimationSpeed)();\n}\n\nexport function resetTransformations() {\n  const { defaultScale, defaultPositionX, defaultPositionY } = this.props.defaultValues;\n  const { scale, positionX, positionY, disabled, resetAnimationSpeed } = this.stateProvider;\n  if (disabled) return;\n  if (scale === defaultScale && positionX === defaultPositionX && positionY === defaultPositionY)\n    return;\n\n  const targetScale = checkIsNumber(defaultScale, initialState.scale);\n  const newPositionX = checkIsNumber(defaultPositionX, initialState.positionX);\n  const newPositionY = checkIsNumber(defaultPositionY, initialState.positionY);\n\n  // animate\n  animateFunction.bind(this, {\n    animationVariable: this.animate,\n    animationTime: resetAnimationSpeed,\n    animationName: \"linear\",\n    callback: step => {\n      const newPosX = positionX + (newPositionX - positionX) * step;\n      const newPosY = positionY + (newPositionY - positionY) * step;\n      const newScale = scale + (targetScale - scale) * step;\n      this.stateProvider = {\n        ...this.stateProvider,\n        scale: newScale,\n        positionX: newPosX,\n        positionY: newPosY,\n        previousScale: this.stateProvider.scale,\n      };\n      // update component transformation\n      this.setContentComponentTransformation();\n    },\n    doneCallback: () => {\n      handleCallback(this.props.onZoomChange, this.getCallbackProps());\n    },\n    cancelCallback: () => {\n      handleCallback(this.props.onZoomChange, this.getCallbackProps());\n    },\n  })();\n}\n\nexport function animatePadding(event) {\n  const {\n    positionX,\n    positionY,\n    scale,\n    scalePaddingAnimationSpeed,\n    minScale,\n    maxScale,\n  } = this.stateProvider;\n  if (scale > minScale && scale < maxScale) return;\n  const { wrapperComponent } = this.state;\n\n  // calculate zoom center\n  const wrapperWidth = wrapperComponent.offsetWidth;\n  const wrapperHeight = wrapperComponent.offsetHeight;\n  const mouseX = (Math.abs(positionX) + wrapperWidth / 2) / scale;\n  const mouseY = (Math.abs(positionY) + wrapperHeight / 2) / scale;\n  handleZoom.bind(\n    this,\n    event,\n    { mouseX, mouseY },\n    this.lastDelta,\n    1,\n    scalePaddingAnimationSpeed,\n    true\n  )();\n}\n","import { calculateTransformation, getComponentsSizes, checkZoomBounds } from \"./_zoom\";\nimport { getDistance, calculateBoundingArea } from \"./utils\";\n\nfunction round(number, decimal) {\n  const roundNumber = Math.pow(10, decimal);\n  return Math.round(number * roundNumber) / roundNumber;\n}\n\nfunction getCurrentDistance(event) {\n  return getDistance(event.touches[0], event.touches[1]);\n}\n\nfunction checkIfInfinite(number) {\n  return number === Infinity || number === -Infinity;\n}\n\nexport function calculatePinchZoom(currentDistance, pinchStartDistance) {\n  const { minScale, maxScale, scaleAnimationPadding } = this.stateProvider;\n  if (typeof pinchStartDistance !== \"number\" || typeof currentDistance !== \"number\")\n    return console.error(\"Pinch touches distance was not provided\");\n\n  if (currentDistance < 0) return;\n  const touchProportion = currentDistance / pinchStartDistance;\n  const scaleDifference = touchProportion * this.pinchStartScale;\n\n  return checkZoomBounds(scaleDifference, minScale, maxScale, scaleAnimationPadding);\n}\n\nexport function calculateMidpoint(event, scale, contentComponent) {\n  const contentRect = contentComponent.getBoundingClientRect();\n  const { touches } = event;\n  const firstPointX = round(touches[0].clientX - contentRect.left, 5);\n  const firstPointY = round(touches[0].clientY - contentRect.top, 5);\n  const secondPointX = round(touches[1].clientX - contentRect.left, 5);\n  const secondPointY = round(touches[1].clientY - contentRect.top, 5);\n\n  return {\n    mouseX: (firstPointX + secondPointX) / 2 / scale,\n    mouseY: (firstPointY + secondPointY) / 2 / scale,\n  };\n}\n\nexport function handleZoomPinch(event) {\n  const { isDown, zoomingEnabled, disabled, scale, limitToWrapperBounds } = this.stateProvider;\n  const { wrapperComponent, contentComponent } = this.state;\n  if (isDown || !zoomingEnabled || disabled) return;\n\n  if (event.cancelable) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  // if one finger starts from outside of wrapper\n  if (this.pinchStartDistance === null) return;\n\n  // Position transformation\n  const { mouseX, mouseY } = calculateMidpoint(event, scale, contentComponent);\n\n  // if touches goes off of the wrapper element\n  if (checkIfInfinite(mouseX) || checkIfInfinite(mouseY)) return;\n\n  const currentDistance = getCurrentDistance(event);\n\n  const newScale = calculatePinchZoom.bind(this, currentDistance, this.pinchStartDistance)();\n  if (checkIfInfinite(newScale) || newScale === scale) return;\n\n  const scaleDifference = newScale - scale;\n\n  // Get new element sizes to calculate bounds\n  const {\n    wrapperWidth,\n    wrapperHeight,\n    newContentWidth,\n    newDiffWidth,\n    newContentHeight,\n    newDiffHeight,\n  } = getComponentsSizes(wrapperComponent, newScale);\n\n  const bounds = calculateBoundingArea(\n    wrapperWidth,\n    newContentWidth,\n    newDiffWidth,\n    wrapperHeight,\n    newContentHeight,\n    newDiffHeight,\n    limitToWrapperBounds\n  );\n\n  // Save last zoom bounds, to speed up panning function\n  this.bounds = bounds;\n\n  // Calculate transformations\n  const { newPositionX, newPositionY } = calculateTransformation.bind(\n    this,\n    mouseX,\n    mouseY,\n    scaleDifference,\n    bounds\n  )();\n\n  this.lastDistance = currentDistance;\n\n  this.stateProvider = {\n    ...this.stateProvider,\n    positionX: newPositionX,\n    positionY: newPositionY,\n    scale: newScale,\n    previousScale: scale,\n  };\n  // update component transformation\n  this.setContentComponentTransformation();\n}\n","import { calculateBoundingArea } from \"./utils\";\nimport { checkPositionBounds } from \"./_zoom\";\n\nfunction getSizes(wrapperComponent, contentComponent) {\n  const wrapperRect = wrapperComponent.getBoundingClientRect();\n  const contentRect = contentComponent.getBoundingClientRect();\n\n  const wrapperWidth = wrapperRect.width;\n  const wrapperHeight = wrapperRect.height;\n  const contentWidth = contentRect.width;\n  const contentHeight = contentRect.height;\n  const diffWidth = wrapperWidth - contentWidth;\n  const diffHeight = wrapperHeight - contentHeight;\n\n  return {\n    wrapperWidth,\n    wrapperHeight,\n    contentWidth,\n    diffWidth,\n    contentHeight,\n    diffHeight,\n  };\n}\n\nfunction handleCalculateBounds(wrapperComponent, contentComponent, limitToWrapperBounds) {\n  const {\n    wrapperWidth,\n    contentWidth,\n    diffWidth,\n    wrapperHeight,\n    contentHeight,\n    diffHeight,\n  } = getSizes(wrapperComponent, contentComponent);\n  return calculateBoundingArea(\n    wrapperWidth,\n    contentWidth,\n    diffWidth,\n    wrapperHeight,\n    contentHeight,\n    diffHeight,\n    limitToWrapperBounds\n  );\n}\n\nexport function getClientPosition(event) {\n  const { touches } = event;\n\n  // Mobile points\n  if (touches && touches.length === 1) {\n    return { clientX: touches[0].clientX, clientY: touches[0].clientY };\n  }\n  // Desktop points\n  if (!touches) {\n    return { clientX: event.clientX, clientY: event.clientY };\n  }\n  return null;\n}\n\nexport function handlePanning(event) {\n  const {\n    limitToWrapperBounds,\n    limitToBounds,\n    positionX,\n    positionY,\n    lockAxisX,\n    lockAxisY,\n  } = this.stateProvider;\n  const { wrapperComponent, contentComponent } = this.state;\n\n  if (!this.startCoords) return;\n  const { x, y } = this.startCoords;\n\n  const positions = getClientPosition(event);\n  if (!positions) return console.error(\"Cannot find mouse client positions\");\n  const { clientX, clientY } = positions;\n\n  // Calculate bounding area\n  let bounds = this.bounds;\n\n  // If panning is fired before scaling and there are no bounds calculated\n  if (!bounds) {\n    const calculatedBounds = handleCalculateBounds(\n      wrapperComponent,\n      contentComponent,\n      limitToWrapperBounds\n    );\n    this.bounds = calculatedBounds;\n    bounds = calculatedBounds;\n  }\n\n  // Get Position\n  const newPositionX = lockAxisX ? positionX : clientX - x;\n  const newPositionY = lockAxisY ? positionY : clientY - y;\n\n  // If position didn't change\n  if (newPositionX === positionX && newPositionY === positionY) return;\n  const calculatedPosition = checkPositionBounds(newPositionX, newPositionY, bounds, limitToBounds);\n\n  // Save panned position\n  this.stateProvider = {\n    ...this.stateProvider,\n    positionX: calculatedPosition.x,\n    positionY: calculatedPosition.y,\n  };\n  // update component transformation\n  this.setContentComponentTransformation();\n}\n","import { checkPositionBounds } from \"./_zoom\";\nimport { getClientPosition } from \"./_pan\";\nimport { animateFunction, handleDisableAnimation } from \"./_animations\";\n\nfunction velocityTimeSpeed(speed, animationTime) {\n  const { velocityTimeBasedOnMove } = this.stateProvider;\n\n  if (velocityTimeBasedOnMove) {\n    return animationTime - animationTime / Math.max(1.6, speed);\n  }\n  return animationTime;\n}\n\nfunction handleEnableVelocity() {\n  this.setState({ startAnimation: false });\n}\n\nexport function handleFireVelocity() {\n  this.setState({ startAnimation: true });\n}\n\nexport function animateVelocity() {\n  const {\n    positionX,\n    positionY,\n    limitToBounds,\n    velocityAnimationSpeed,\n    lockAxisX,\n    lockAxisY,\n  } = this.stateProvider;\n  if (!this.velocity || !this.bounds) return handleDisableAnimation.bind(this)();\n  const { velocityX, velocityY, velocity } = this.velocity;\n  const animationTime = velocityTimeSpeed.bind(this, velocity, velocityAnimationSpeed)();\n  const targetX = velocityX;\n  const targetY = velocityY;\n\n  this.offsetX = positionX;\n  this.offsetY = positionY;\n\n  animateFunction.bind(this, {\n    animationVariable: this.animate,\n    animationTime,\n    callback: step => {\n      const currentPositionX = lockAxisX ? positionX : this.offsetX + targetX - targetX * step;\n      const currentPositionY = lockAxisY ? positionY : this.offsetY + targetY - targetY * step;\n\n      const calculatedPosition = checkPositionBounds(\n        currentPositionX,\n        currentPositionY,\n        this.bounds,\n        limitToBounds\n      );\n\n      this.offsetX = calculatedPosition.x;\n      this.offsetY = calculatedPosition.y;\n\n      // Save panned position\n      this.stateProvider = {\n        ...this.stateProvider,\n        positionX: calculatedPosition.x,\n        positionY: calculatedPosition.y,\n      };\n      // update component transformation\n      this.setContentComponentTransformation();\n    },\n    doneCallback: () => handleDisableAnimation.bind(this)(),\n    cancelCallback: () => (this.velocity = null),\n  })();\n}\n\nexport function calculateVelocityStart(event) {\n  const {\n    enableVelocity,\n    minVelocityScale,\n    scale,\n    disabled,\n    velocitySensitivity,\n  } = this.stateProvider;\n  if (!enableVelocity || minVelocityScale >= scale || disabled) return;\n  handleEnableVelocity.bind(this)();\n  const now = Date.now();\n  if (this.lastMousePosition) {\n    const position = getClientPosition(event);\n    if (!position) return console.error(\"No mouse or touch position detected\");\n    const { clientX, clientY } = position;\n    const distanceX = (clientX - this.lastMousePosition.clientX) * scale;\n    const distanceY = (clientY - this.lastMousePosition.clientY) * scale;\n    const interval = now - this.velocityTime;\n    const velocityX = (distanceX / interval) * velocitySensitivity;\n    const velocityY = (distanceY / interval) * velocitySensitivity;\n    const velocity =\n      (Math.sqrt(distanceX * distanceX + distanceY * distanceY) / interval) * velocitySensitivity;\n\n    if (this.velocity && velocity < this.velocity.velocity && this.throttle) return;\n    this.velocity = { velocityX, velocityY, velocity };\n\n    // throttling\n    if (this.throttle) clearTimeout(this.throttle);\n    this.throttle = setTimeout(() => (this.throttle = false), this.throttleTime);\n  }\n  const position = getClientPosition(event);\n  this.lastMousePosition = position;\n  this.velocityTime = now;\n}\n","// We want to make event listeners non-passive, and to do so have to check\n// that browsers support EventListenerOptions in the first place.\n// https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\nlet passiveSupported = false;\n\nfunction makePassiveEventOption(passive) {\n  return passiveSupported ? { passive } : passive;\n}\n\nexport default makePassiveEventOption;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { initialState } from \"./InitialState\";\nimport { roundNumber, getDistance, handleCallback } from \"./utils\";\nimport {\n  handleZoom,\n  handleZoomControls,\n  handleZoomDbClick,\n  resetTransformations,\n  animatePadding,\n} from \"./_zoom\";\nimport { handleZoomPinch } from \"./_pinch\";\nimport { handlePanning } from \"./_pan\";\nimport { handleFireVelocity, animateVelocity, calculateVelocityStart } from \"./_velocity\";\nimport { handleDisableAnimation } from \"./_animations\";\nimport makePassiveEventOption from \"./makePassiveEventOption\";\n\nconst Context = React.createContext({});\n\nlet timer = null;\nconst timerTime = 100;\nlet wheelTimer = null;\nconst wheelTime = 50;\n\nclass StateProvider extends Component {\n  state = {\n    wrapperComponent: null,\n    contentComponent: null,\n    startAnimation: false,\n  };\n\n  stateProvider = {\n    ...initialState,\n    ...this.props.dynamicValues,\n    ...this.props.defaultValues,\n    previousScale: this.props.defaultValues.scale || initialState.scale,\n  };\n\n  // pinch helpers\n  pinchStartDistance = null;\n  lastDistance = null;\n  pinchStartScale = null;\n  distance = null;\n  bounds = null;\n  startPanningCoords = null;\n  // velocity helpers\n  velocityTime = null;\n  lastMousePosition = null;\n  velocity = null;\n  animate = false;\n  offsetX = null;\n  offsetY = null;\n  throttle = false;\n  throttleTime = 30;\n  // zoom helpers\n  zoomPaddingAnimation = null;\n  zoomPaddingTimer = null;\n  // wheel helpers\n  wheelEnd = false;\n  lastWheelScale = null;\n  lastWheelDelta = null;\n\n  componentDidMount() {\n    const passiveOption = makePassiveEventOption(false);\n\n    // Panning on window to allow panning when mouse is out of wrapper\n    window.addEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n    window.addEventListener(\"mousemove\", this.handlePanning, passiveOption);\n    window.addEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n    return () => {\n      window.removeEventListener(\"mousedown\", this.handleStartPanning, passiveOption);\n      window.removeEventListener(\"mousemove\", this.handlePanning, passiveOption);\n      window.removeEventListener(\"mouseup\", this.handleStopPanning, passiveOption);\n    };\n  }\n\n  componentDidUpdate(oldProps, oldState) {\n    const { wrapperComponent, contentComponent, startAnimation } = this.state;\n    const { dynamicValues } = this.props;\n    if (!oldState.contentComponent && contentComponent) {\n      this.stateProvider = { ...this.stateProvider, contentComponent };\n    }\n    if (!oldState.wrapperComponent && wrapperComponent) {\n      this.stateProvider = { ...this.stateProvider, wrapperComponent };\n\n      // Zooming events on wrapper\n      const passiveOption = makePassiveEventOption(false);\n      wrapperComponent.addEventListener(\"mousewheel\", this.handleWheel, passiveOption);\n      wrapperComponent.addEventListener(\"dblclick\", this.handleDbClick, passiveOption);\n      wrapperComponent.addEventListener(\"touchstart\", this.handleTouchStart, passiveOption);\n      wrapperComponent.addEventListener(\"touchmove\", this.handleTouch, passiveOption);\n      wrapperComponent.addEventListener(\"touchend\", this.handleTouchStop, passiveOption);\n    }\n\n    // start velocity animation\n    if (this.velocity && startAnimation) animateVelocity.bind(this)();\n\n    // when bounds limiters change\n    if (\n      oldProps.dynamicValues !== dynamicValues &&\n      (oldProps.dynamicValues.limitToBounds !== dynamicValues.limitToBounds ||\n        oldProps.dynamicValues.limitToWrapperBounds !== dynamicValues.limitToWrapperBounds)\n    ) {\n      this.bounds = null;\n    }\n\n    // must be at the end of the update function\n    if (oldProps.dynamicValues !== dynamicValues) {\n      this.stateProvider = { ...this.stateProvider, ...dynamicValues };\n      this.forceUpdate();\n    }\n  }\n\n  //////////\n  // Wheel\n  //////////\n\n  handleWheel = event => {\n    const { enableWheel, enableTouchPadPinch, scale, maxScale, minScale } = this.stateProvider;\n    const { onWheelStart, onWheel, onWheelStop, onZoomChange } = this.props;\n\n    // ctrlKey detects if touchpad execute wheel or pinch gesture\n    if (!enableWheel && !event.ctrlKey) return;\n    if (!enableTouchPadPinch && event.ctrlKey) return;\n\n    if (scale != this.lastWheelScale) {\n      this.wheelStart = false;\n      this.lastWheelScale = scale;\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        animatePadding.bind(this, event)();\n        handleCallback(onWheelStop, this.getCallbackProps());\n        handleCallback(onZoomChange, this.getCallbackProps());\n        timer = null;\n        this.lastWheelScale = null;\n        this.wheelEnd = true;\n      }, timerTime);\n    }\n    if (!this.lastWheelDelta) this.lastWheelDelta = event.deltaY;\n    if (this.wheelEnd) {\n      if (Math.abs(event.deltaY) <= Math.abs(this.lastWheelDelta)) {\n        clearTimeout(wheelTimer);\n        wheelTimer = setTimeout(() => {\n          wheelTimer = null;\n          this.wheelEnd = false;\n          this.lastWheelDelta = null;\n        }, wheelTime);\n        this.lastWheelDelta = event.deltaY;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      return;\n    }\n\n    if (!timer) {\n      // Wheel start event\n      handleDisableAnimation.bind(this)();\n      handleCallback(onWheelStart, this.getCallbackProps());\n    }\n\n    // Wheel event\n    handleZoom.bind(this, event, undefined, undefined, undefined, \"wheel\")();\n    handleCallback(onWheel, this.getCallbackProps());\n\n    // Wheel stop event\n    if (scale > maxScale || scale < minScale) {\n      clearTimeout(this.zoomPaddingTimer);\n      this.zoomPaddingTimer = setTimeout(() => {}, 10);\n    }\n  };\n\n  //////////\n  // Panning\n  //////////\n\n  checkIsPanningActive = event => {\n    const { panningEnabled, disabled } = this.stateProvider;\n\n    return (\n      !this.isDown ||\n      !panningEnabled ||\n      disabled ||\n      (event.touches &&\n        (event.touches.length !== 1 || Math.abs(this.startCoords.x - event.touches[0].clientX) < 1))\n    );\n  };\n\n  handleSetUpPanning = (x, y) => {\n    const { positionX, positionY } = this.stateProvider;\n    this.isDown = true;\n    this.startCoords = { x: x - positionX, y: y - positionY };\n\n    handleCallback(this.props.onPanningStart, this.getCallbackProps());\n  };\n\n  handleStartPanning = event => {\n    const { panningEnabled, disabled, wrapperComponent } = this.stateProvider;\n    const { target, touches } = event;\n    if (!panningEnabled || disabled || (wrapperComponent && !wrapperComponent.contains(target)))\n      return;\n\n    handleDisableAnimation.bind(this)();\n    // Mobile points\n    if (touches && touches.length === 1) {\n      this.handleSetUpPanning(touches[0].clientX, touches[0].clientY);\n    }\n    // Desktop points\n    if (!touches) {\n      this.handleSetUpPanning(event.clientX, event.clientY);\n    }\n  };\n\n  handlePanning = event => {\n    event.preventDefault();\n    if (this.checkIsPanningActive(event)) return;\n    event.stopPropagation();\n\n    calculateVelocityStart.bind(this, event)();\n    handlePanning.bind(this, event)();\n    handleCallback(this.props.onPanning, this.getCallbackProps());\n  };\n\n  handleStopPanning = () => {\n    if (this.isDown) {\n      this.isDown = false;\n      handleFireVelocity.bind(this)();\n      handleCallback(this.props.onPanningStop, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Pinch\n  //////////\n\n  handlePinchStart = event => {\n    const { scale } = this.stateProvider;\n    event.preventDefault();\n    event.stopPropagation();\n\n    handleDisableAnimation.bind(this)();\n    const distance = getDistance(event.touches[0], event.touches[1]);\n    this.pinchStartDistance = distance;\n    this.lastDistance = distance;\n    this.pinchStartScale = scale;\n\n    handleCallback(this.props.onPinchingStart, this.getCallbackProps());\n  };\n\n  handlePinch = event => {\n    handleZoomPinch.bind(this, event)();\n    handleCallback(this.props.onPinching, this.getCallbackProps());\n  };\n\n  handlePinchStop = event => {\n    if (typeof this.pinchStartScale === \"number\") {\n      this.pinchStartDistance = null;\n      this.lastDistance = null;\n      this.pinchStartScale = null;\n      animatePadding.bind(this, event)();\n      handleCallback(this.props.onPinchingStop, this.getCallbackProps());\n    }\n  };\n\n  //////////\n  // Touch Events\n  //////////\n\n  handleTouchStart = event => {\n    const { disabled } = this.stateProvider;\n    const { touches } = event;\n    handleDisableAnimation.bind(this)();\n    if (disabled) return;\n    if (touches && touches.length === 1) return this.handleStartPanning(event);\n    if (touches && touches.length === 2) return this.handlePinchStart(event);\n  };\n\n  handleTouch = event => {\n    const { panningEnabled, pinchEnabled, disabled } = this.stateProvider;\n    if (disabled) return;\n    if (panningEnabled && event.touches.length === 1) return this.handlePanning(event);\n    if (pinchEnabled && event.touches.length === 2) return this.handlePinch(event);\n  };\n\n  handleTouchStop = event => {\n    this.handlePinchStop(event);\n    this.handleStopPanning();\n  };\n\n  //////////\n  // Controls\n  //////////\n\n  resetLastMousePosition = () =>\n    (this.stateProvider = { ...this.stateProvider, lastMouseEventPosition: null });\n\n  zoomIn = event => {\n    const { zoomingEnabled, disabled, zoomInStep } = this.stateProvider;\n    if (!event) throw Error(\"Zoom in function require event prop\");\n    if (!zoomingEnabled || disabled) return;\n    handleZoomControls.bind(this, event, 1, zoomInStep)();\n  };\n\n  zoomOut = event => {\n    const { zoomingEnabled, disabled, zoomOutStep } = this.stateProvider;\n    if (!event) throw Error(\"Zoom out function require event prop\");\n    if (!zoomingEnabled || disabled) return;\n    handleZoomControls.bind(this, event, -1, zoomOutStep)();\n  };\n\n  handleDbClick = event => {\n    const { zoomingEnabled, disabled, dbClickStep, dbClickEnabled } = this.stateProvider;\n    if (!event) throw Error(\"Double click function require event prop\");\n    if (!zoomingEnabled || disabled || !dbClickEnabled) return;\n    handleZoomDbClick.bind(this, event, 1, dbClickStep)();\n  };\n\n  setScale = scale => {\n    this.stateProvider = { ...this.stateProvider, scale };\n    // update component transformation\n    this.setContentComponentTransformation();\n  };\n\n  setPositionX = positionX => {\n    this.stateProvider = { ...this.stateProvider, positionX: roundNumber(positionX, 3) };\n    // update component transformation\n    this.setContentComponentTransformation();\n  };\n\n  setPositionY = positionY => {\n    this.stateProvider = { ...this.stateProvider, positionY: roundNumber(positionY, 3) };\n    // update component transformation\n    this.setContentComponentTransformation();\n  };\n\n  setTransform = (positionX, positionY, scale) => {\n    if (!this.stateProvider.transformEnabled) return;\n    !isNaN(scale) && this.setScale(scale);\n    !isNaN(positionX) && this.setPositionX(positionX);\n    !isNaN(positionY) && this.setPositionY(positionY);\n  };\n\n  resetTransform = () => {\n    const { disabled } = this.stateProvider;\n    if (disabled) return;\n    resetTransformations.bind(this)();\n  };\n\n  //////////\n  // Setters\n  //////////\n\n  setWrapperComponent = wrapperComponent => {\n    this.setState({ wrapperComponent });\n  };\n\n  setContentComponent = contentComponent => {\n    this.setState({ contentComponent }, () => {\n      if (this.stateProvider.isCentered) {\n        const { scale } = this.stateProvider;\n        const rect = this.state.wrapperComponent.getBoundingClientRect();\n        this.stateProvider.positionX = (rect.width - rect.width * scale) / 2;\n        this.stateProvider.positionY = (rect.height - rect.height * scale) / 2;\n      }\n      this.setContentComponentTransformation();\n    });\n  };\n\n  setContentComponentTransformation = () => {\n    const { contentComponent } = this.state;\n    if (!contentComponent) return console.error(\"There is no content component\");\n    const transform = `translate(${this.stateProvider.positionX}px, ${this.stateProvider.positionY}px) scale(${this.stateProvider.scale})`;\n    contentComponent.style.transform = transform;\n    this.setState({ updated: true });\n  };\n\n  //////////\n  // Props\n  //////////\n  getCallbackProps = () => {\n    return {\n      positionX: this.stateProvider.positionX,\n      positionY: this.stateProvider.positionY,\n      scale: this.stateProvider.scale,\n      sensitivity: this.stateProvider.sensitivity,\n      maxScale: this.stateProvider.maxScale,\n      minScale: this.stateProvider.minScale,\n      wheelAnimationSpeed: this.stateProvider.wheelAnimationSpeed,\n      zoomAnimationSpeed: this.stateProvider.zoomAnimationSpeed,\n      pinchAnimationSpeed: this.stateProvider.pinchAnimationSpeed,\n      panAnimationSpeed: this.stateProvider.panAnimationSpeed,\n      minPositionX: this.stateProvider.minPositionX,\n      minPositionY: this.stateProvider.minPositionY,\n      maxPositionX: this.stateProvider.maxPositionX,\n      maxPositionY: this.stateProvider.maxPositionY,\n      limitToBounds: this.stateProvider.limitToBounds,\n      zoomingEnabled: this.stateProvider.zoomingEnabled,\n      panningEnabled: this.stateProvider.panningEnabled,\n      transformEnabled: this.stateProvider.transformEnabled,\n      pinchEnabled: this.stateProvider.pinchEnabled,\n      limitToWrapperBounds: this.stateProvider.limitToWrapperBounds,\n      disabled: this.stateProvider.disabled,\n      zoomOutStep: this.stateProvider.zoomOutStep,\n      zoomInStep: this.stateProvider.zoomInStep,\n      dbClickStep: this.stateProvider.dbClickStep,\n      pinchSensitivity: this.stateProvider.pinchSensitivity,\n      dbClickEnabled: this.stateProvider.dbClickEnabled,\n      lastPositionZoomEnabled: this.stateProvider.lastPositionZoomEnabled,\n      previousScale: this.stateProvider.previousScale,\n      scaleAnimationPadding: this.stateProvider.scalePadding,\n      lockAxisX: this.stateProvider.lockAxisX,\n      lockAxisY: this.stateProvider.lockAxisY,\n      velocityTimeBasedOnMove: this.stateProvider.velocityTimeBasedOnMove,\n      velocitySensitivity: this.stateProvider.velocitySensitivity,\n      scalePaddingAnimationSpeed: this.stateProvider.scalePaddingAnimationSpeed,\n      enableWheel: this.stateProvider.enableWheel,\n      enableTouchPadPinch: this.stateProvider.enableTouchPadPinch,\n    };\n  };\n\n  render() {\n    /**\n     * Context provider value\n     */\n    const value = {\n      state: this.getCallbackProps(),\n      dispatch: {\n        setScale: this.setScale,\n        setPositionX: this.setPositionX,\n        setPositionY: this.setPositionY,\n        zoomIn: this.zoomIn,\n        zoomOut: this.zoomOut,\n        setTransform: this.setTransform,\n        resetTransform: this.resetTransform,\n      },\n      nodes: {\n        setWrapperComponent: this.setWrapperComponent,\n        setContentComponent: this.setContentComponent,\n      },\n      internal: {\n        handleZoom: this.handleZoom,\n        handleStartPanning: this.handleStartPanning,\n        handlePanning: this.handlePanning,\n        handleStopPanning: this.handleStopPanning,\n        handleDbClick: this.handleDbClick,\n        handleTouchStart: this.handleTouchStart,\n        handleTouch: this.handleTouch,\n        handleTouchStop: this.handleTouchStop,\n      },\n    };\n    const { children } = this.props;\n    const content =\n      typeof children === \"function\" ? children({ ...value.state, ...value.dispatch }) : children;\n\n    return <Context.Provider value={value}>{content}</Context.Provider>;\n  }\n}\n\nStateProvider.defaultProps = {\n  defaultValues: {},\n  dynamicValues: {},\n  onWheelStart: null,\n  onWheel: null,\n  onWheelStop: null,\n  onPanningStart: null,\n  onPanning: null,\n  onPanningStop: null,\n  onPinchingStart: null,\n  onPinching: null,\n  onPinchingStop: null,\n};\n\nStateProvider.propTypes = {\n  children: PropTypes.any,\n  defaultValues: PropTypes.object,\n  dynamicValues: PropTypes.object,\n  onWheelStart: PropTypes.func,\n  onWheel: PropTypes.func,\n  onWheelStop: PropTypes.func,\n  onPanningStart: PropTypes.func,\n  onPanning: PropTypes.func,\n  onPanningStop: PropTypes.func,\n  onPinchingStart: PropTypes.func,\n  onPinching: PropTypes.func,\n  onPinchingStop: PropTypes.func,\n  onZoomChange: PropTypes.func,\n};\n\nexport { Context, StateProvider };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { StateProvider } from \"../store/StateContext\";\nimport { deleteUndefinedProps } from \"../store/utils\";\n\nconst TransformWrapper = ({\n  children,\n  scale,\n  positionX,\n  positionY,\n  sensitivity,\n  maxScale,\n  minScale,\n  scaleAnimationPadding,\n  wheelAnimationSpeed,\n  zoomAnimationSpeed,\n  pinchAnimationSpeed,\n  panAnimationSpeed,\n  resetAnimationSpeed,\n  scalePaddingAnimationSpeed,\n  minPositionX,\n  minPositionY,\n  maxPositionX,\n  maxPositionY,\n  limitToBounds,\n  zoomingEnabled,\n  panningEnabled,\n  transformEnabled,\n  pinchEnabled,\n  limitToWrapperBounds,\n  disabled,\n  zoomOutStep,\n  zoomInStep,\n  dbClickStep,\n  pinchSensitivity,\n  dbClickEnabled,\n  lastPositionZoomEnabled,\n  enableZoomThrottling,\n  onWheelStart,\n  onWheel,\n  onWheelStop,\n  onPanningStart,\n  onPanning,\n  onPanningStop,\n  onPinchingStart,\n  onPinching,\n  onPinchingStop,\n  onZoomChange,\n  defaultPositionX,\n  defaultPositionY,\n  defaultScale,\n  lockAxisX,\n  lockAxisY,\n  velocityTimeBasedOnMove,\n  velocitySensitivity,\n  isCentered,\n  enableWheel,\n  enableTouchPadPinch,\n}) => {\n  return (\n    <StateProvider\n      defaultValues={deleteUndefinedProps({\n        positionX: defaultPositionX,\n        positionY: defaultPositionY,\n        scale: defaultScale,\n      })}\n      dynamicValues={deleteUndefinedProps({\n        scale,\n        positionX,\n        positionY,\n        sensitivity,\n        maxScale,\n        minScale,\n        wheelAnimationSpeed,\n        zoomAnimationSpeed,\n        pinchAnimationSpeed,\n        panAnimationSpeed,\n        resetAnimationSpeed,\n        minPositionX,\n        minPositionY,\n        maxPositionX,\n        maxPositionY,\n        limitToBounds,\n        zoomingEnabled,\n        panningEnabled,\n        transformEnabled,\n        pinchEnabled,\n        limitToWrapperBounds,\n        disabled,\n        zoomOutStep,\n        zoomInStep,\n        dbClickStep,\n        pinchSensitivity,\n        dbClickEnabled,\n        lastPositionZoomEnabled,\n        enableZoomThrottling,\n        lockAxisX,\n        lockAxisY,\n        velocityTimeBasedOnMove,\n        velocitySensitivity,\n        scalePaddingAnimationSpeed,\n        scaleAnimationPadding,\n        isCentered,\n        enableWheel,\n        enableTouchPadPinch,\n      })}\n      onWheelStart={onWheelStart}\n      onWheel={onWheel}\n      onWheelStop={onWheelStop}\n      onPanningStart={onPanningStart}\n      onPanning={onPanning}\n      onPanningStop={onPanningStop}\n      onPinchingStart={onPinchingStart}\n      onPinching={onPinching}\n      onPinchingStop={onPinchingStop}\n      onZoomChange={onZoomChange}\n    >\n      {children}\n    </StateProvider>\n  );\n};\n\nTransformWrapper.propTypes = {\n  children: PropTypes.any,\n  scale: PropTypes.number,\n  positionX: PropTypes.number,\n  positionY: PropTypes.number,\n  sensitivity: PropTypes.number,\n  maxScale: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  minScale: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  wheelAnimationSpeed: PropTypes.number,\n  zoomAnimationSpeed: PropTypes.number,\n  pinchAnimationSpeed: PropTypes.number,\n  panAnimationSpeed: PropTypes.number,\n  resetAnimationSpeed: PropTypes.number,\n  minPositionX: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  maxPositionX: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  minPositionY: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  maxPositionY: PropTypes.oneOfType([PropTypes.number, PropTypes.object]),\n  limitToBounds: PropTypes.bool,\n  zoomingEnabled: PropTypes.bool,\n  panningEnabled: PropTypes.bool,\n  transformEnabled: PropTypes.bool,\n  pinchEnabled: PropTypes.bool,\n  limitToWrapperBounds: PropTypes.bool,\n  disabled: PropTypes.bool,\n  zoomOutStep: PropTypes.bool,\n  zoomInStep: PropTypes.bool,\n  dbClickStep: PropTypes.bool,\n  pinchSensitivity: PropTypes.bool,\n  dbClickEnabled: PropTypes.bool,\n  lastPositionZoomEnabled: PropTypes.bool,\n  enableZoomThrottling: PropTypes.bool,\n  onWheelStart: PropTypes.func,\n  onWheel: PropTypes.func,\n  onWheelStop: PropTypes.func,\n  onPanningStart: PropTypes.func,\n  onPanning: PropTypes.func,\n  onPanningStop: PropTypes.func,\n  onPinchingStart: PropTypes.func,\n  onPinching: PropTypes.func,\n  onPinchingStop: PropTypes.func,\n  onZoomChange: PropTypes.func,\n  defaultPositionX: PropTypes.number,\n  defaultPositionY: PropTypes.number,\n  defaultScale: PropTypes.number,\n  lockAxisX: PropTypes.bool,\n  lockAxisY: PropTypes.bool,\n  velocityTimeBasedOnMove: PropTypes.bool,\n  velocitySensitivity: PropTypes.number,\n  scaleAnimationPadding: PropTypes.number,\n  scalePaddingAnimationSpeed: PropTypes.number,\n  isCentered: PropTypes.bool,\n  enableWheel: PropTypes.bool,\n  enableTouchPadPinch: PropTypes.bool,\n};\n\nexport default TransformWrapper;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { useContext, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Context } from \"../store/StateContext\";\nimport styles from \"./TransformComponent.module.css\";\n\nfunction TransformComponent({ children }) {\n  const wrapperRef = useRef(null);\n  const contentRef = useRef(null);\n  const { state, nodes } = useContext(Context);\n  const style = {\n    transform: `translate(${state.positionX}px, ${state.positionY}px) scale(${state.scale})`,\n  };\n\n  useEffect(() => {\n    if (wrapperRef.current) {\n      nodes.setWrapperComponent(wrapperRef.current);\n    }\n    if (contentRef.current) {\n      nodes.setContentComponent(contentRef.current);\n    }\n  }, []);\n\n  return (\n    <div ref={wrapperRef} className={`\"react-transform-component\" ${styles.container}`}>\n      <div ref={contentRef} className={`react-transform-element ${styles.content}`} style={style}>\n        {children}\n      </div>\n    </div>\n  );\n}\n\nTransformComponent.propTypes = { children: PropTypes.any };\n\nexport default TransformComponent;\n"],"names":["initialState","roundNumber","num","decimal","Number","toFixed","checkIsNumber","defaultValue","boundLimiter","value","minBound","maxBound","isActive","calculateBoundingArea","wrapperWidth","contentWidth","diffWidth","wrapperHeight","contentHeight","diffHeight","limitToWrapperBounds","scaleWidthFactor","scaleHeightFactor","minPositionX","maxPositionX","minPositionY","maxPositionY","getDistance","firstPoint","secondPoint","Math","sqrt","pow","pageX","pageY","deleteUndefinedProps","newObject","keys","forEach","key","undefined","handleCallback","callback","props","easeOut","animationProgress","cos","PI","easeIn","sin","linear","handleDisableAnimation","velocity","animate","setState","startAnimation","animateFunction","animationVariable","animationTime","cancelCallback","doneCallback","animationName","lastStep","startTime","Date","getTime","frameTime","animationType","step","animatePaddingFunction","zoomPaddingAnimation","checkZoomBounds","zoom","minScale","maxScale","scaleAnimationPadding","maxScaleWithPadding","minScaleWithPadding","isNaN","checkPositionBounds","positionX","positionY","bounds","limitToBounds","x","y","getDelta","event","customDelta","deltaY","delta","wheelMousePosition","contentComponent","scale","contentRect","getBoundingClientRect","mouseX","clientX","left","mouseY","clientY","top","console","warn","getComponentsSizes","wrapperComponent","newScale","wrapperRect","width","height","newContentWidth","newContentHeight","newDiffWidth","newDiffHeight","calculateZoom","zoomStep","customScale","disabledPadding","stateProvider","padding","calculatedScale","calculateTransformation","scaleDifference","error","transformEnabled","newPositionX","newPositionY","calculatedPositionX","calculatedPositionY","handleZoom","customMousePosition","customStep","isDown","zoomingEnabled","disabled","wheelStep","state","zoomPaddingTimer","preventDefault","stopPropagation","targetScale","bind","lastDelta","speed","abs","setContentComponentTransformation","params","newPosX","newPosY","onZoomChange","getCallbackProps","handleZoomControls","zoomInAnimationSpeed","zoomOutAnimationSpeed","offsetWidth","offsetHeight","animationSpeed","handleZoomDbClick","dbClickMode","dbClickStep","dbClickAnimationSpeed","resetTransformations","defaultValues","defaultScale","defaultPositionX","defaultPositionY","resetAnimationSpeed","animatePadding","scalePaddingAnimationSpeed","round","number","getCurrentDistance","touches","checkIfInfinite","Infinity","calculatePinchZoom","currentDistance","pinchStartDistance","touchProportion","pinchStartScale","calculateMidpoint","firstPointX","firstPointY","secondPointX","secondPointY","handleZoomPinch","cancelable","lastDistance","getSizes","handleCalculateBounds","getClientPosition","length","handlePanning","lockAxisX","lockAxisY","startCoords","positions","calculatedBounds","calculatedPosition","velocityTimeSpeed","velocityTimeBasedOnMove","max","handleEnableVelocity","handleFireVelocity","animateVelocity","velocityAnimationSpeed","velocityX","velocityY","targetX","targetY","offsetX","offsetY","currentPositionX","currentPositionY","calculateVelocityStart","enableVelocity","minVelocityScale","velocitySensitivity","now","lastMousePosition","position","distanceX","distanceY","interval","velocityTime","throttle","clearTimeout","setTimeout","throttleTime","makePassiveEventOption","passive","passiveSupported","Context","React","createContext","timer","timerTime","wheelTimer","wheelTime","StateProvider","dynamicValues","distance","startPanningCoords","wheelEnd","lastWheelScale","lastWheelDelta","handleWheel","enableWheel","enableTouchPadPinch","onWheelStart","onWheel","onWheelStop","ctrlKey","wheelStart","checkIsPanningActive","panningEnabled","handleSetUpPanning","onPanningStart","handleStartPanning","target","contains","onPanning","handleStopPanning","onPanningStop","handlePinchStart","onPinchingStart","handlePinch","onPinching","handlePinchStop","onPinchingStop","handleTouchStart","handleTouch","pinchEnabled","handleTouchStop","resetLastMousePosition","lastMouseEventPosition","zoomIn","zoomInStep","Error","zoomOut","zoomOutStep","handleDbClick","dbClickEnabled","setScale","setPositionX","setPositionY","setTransform","resetTransform","setWrapperComponent","setContentComponent","isCentered","rect","transform","style","updated","sensitivity","wheelAnimationSpeed","zoomAnimationSpeed","pinchAnimationSpeed","panAnimationSpeed","pinchSensitivity","lastPositionZoomEnabled","previousScale","scalePadding","passiveOption","addEventListener","removeEventListener","oldProps","oldState","forceUpdate","children","content","dispatch","Component","defaultProps","propTypes","PropTypes","any","object","func","TransformWrapper","enableZoomThrottling","oneOfType","bool","TransformComponent","wrapperRef","useRef","contentRef","useContext","nodes","current","styles","container"],"mappings":"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"}